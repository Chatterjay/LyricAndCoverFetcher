# 音频文件处理工具

## 功能概述

该工具用于批量处理音频文件（支持 `.mp3` 和 `.flac` 格式），包括读取文件属性、搜索歌词(可能不准确)和专辑封面、写入标签和嵌入封面图片。处理结果会显示成功和失败的文件数量。

## 使用方法

### 命令行参数

- 运行该工具需要提供一个命令行参数，该参数可以是单个文件路径或目录路径。
- 也可下载该工具的exe直接拖入

   ## 功能详情

### 主要功能

1. **读取文件属性**
    - 读取音频文件的基本属性，如标题、艺术家、专辑。

2. **搜索歌词和专辑封面**
    - 根据文件属性，从API中搜索并获取歌词和专辑封面图片。

3. **写入标签**
    - 将搜索到的歌词和专辑信息写入音频文件的元数据中。

4. **嵌入封面图片**
    - 将专辑封面图片嵌入到音频文件中。

### ❌错误处理

- **文件路径错误**：如果提供的路径不是有效的文件或目录，会显示错误信息。
- **文件属性缺失**：如果文件缺少必要的属性（如标题），会跳过该文件并显示错误信息。
- **网络请求错误**：如果在搜索歌词或封面图片时发生网络请求错误，会显示相应的错误信息。
- **其他错误**：处理过程中发生的其他未预见错误也会被捕获并显示。

## 代码结构

### 主要函数

- **`main()`**
    - 入口函数，处理命令行参数，调用 `process_audio_file` 函数处理文件或目录。
- **`process_audio_file(path)`**
    - 处理单个音频文件，包括读取属性、搜索资源、写入标签和嵌入封面图片。

### 辅助函数

- **`read_file_stats(path)`**
    - 读取音频文件的属性。
- **`search_request_mse(stats)`**
    - 根据文件属性搜索歌词。
- **`search_cover_image(stats)`**
    - 根据文件属性搜索专辑封面图片。
- **`set_lyrics(lyrics, path)`**
    - 将歌词写入音频文件的元数据中。
- **`write_audio_tags(path, album, title, artist)`**
    - 将搜索到的专辑信息写入音频文件的元数据中。
- **`write_audio_image(path, buffer)`**
    - 将专辑封面图片嵌入到音频文件中。

## ❗注意事项

1. **文件路径**：确保提供的文件路径或目录路径是有效的。
2. **网络连接**：搜索歌词和封面图片需要网络连接。
3. **权限**：确保有权限读取和写入指定的文件或目录。
4. **错误日志**：处理过程中出现的错误信息会被打印到控制台，方便调试和问题定位。
5. **特殊文件**：wyy下载转换的flag文件均不可使用，否则会提示无法读取完整文件

---
## 自行构建
```powershell
pyinstaller --onefile main.py
```

希望这个Markdown文档能帮助你更好地理解和使用这个音频文件处理工具。如果有任何进一步的需求或修改，请告诉我。
